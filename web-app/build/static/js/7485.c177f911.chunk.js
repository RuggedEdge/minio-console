"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[7485],{79313:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(65043),i=n(89923),a=n(64159),r=n(21383),l=n(58661),o=n(56629),d=n(53518),c=n(70579);const p=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,idp:p,idpType:u}=e;const f=(0,r.jL)(),[x,j]=(0,s.useState)(!1);if(!p)return null;const A="_"===p?"Default":p;return(0,c.jsx)(l.A,{title:`Delete ${A}`,confirmText:"Delete",isOpen:n,titleIcon:(0,c.jsx)(i.xWY,{}),isLoading:x,onConfirm:()=>{j(!0),o.F.idp.deleteConfiguration(p,u).then((e=>{(e=>{t(!0),f((0,a.YR)(!0===e.restart))})(e.data)})).catch((e=>f((0,a.C9)((0,d.S)(e.error))))).finally((()=>j(!1)))},onClose:()=>t(!1),confirmButtonProps:{disabled:x},confirmationContent:(0,c.jsxs)(s.Fragment,{children:["Are you sure you want to delete IDP ",(0,c.jsx)("b",{children:A})," ","configuration? ",(0,c.jsx)("br",{})]})})}},87485:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var s=n(65043),i=n(89923),a=n(73216),r=n(56629),l=n(53518),o=n(21383),d=n(99161),c=n(77938),p=n(64159),u=n(77403),f=n(6681),x=n(79313),j=n(61595),A=n(70579);const C=e=>{let{idpType:t}=e;const n=(0,o.jL)(),C=(0,a.Zp)(),[b,h]=(0,s.useState)(!1),[m,y]=(0,s.useState)(""),[D,_]=(0,s.useState)(!1),[O,g]=(0,s.useState)([]),I=(0,c._)(d.Ms,[d.OV.ADMIN_CONFIG_UPDATE]),M=(0,c._)(d.Ms,[d.OV.ADMIN_CONFIG_UPDATE]),N=(0,c._)(d.Ms,[d.OV.ADMIN_CONFIG_UPDATE]);(0,s.useEffect)((()=>{F()}),[]),(0,s.useEffect)((()=>{D&&(N?r.F.idp.listConfigurations(t).then((e=>{_(!1),e.data.results&&g(e.data.results.map((e=>(e.name="_"===e.name?"Default":e.name,e.enabled=!0===e.enabled?"Enabled":"Disabled",e))))})).catch((e=>{_(!1),n((0,p.C9)((0,l.S)(e.error)))})):_(!1))}),[D,_,g,n,N,t]);const F=()=>{_(!0)},T=[{type:"view",onClick:e=>{let n="Default"===e.name?"_":e.name;C(`/identity/idp/${t}/configurations/${n}`)},disableButtonFunction:()=>!M},{type:"delete",onClick:e=>{h(!0),y(e="Default"===e?"_":e)},sendOnlyId:!0,disableButtonFunction:e=>!I||"Default"===e}];return(0,s.useEffect)((()=>{n((0,p.ph)("idp_configs"))}),[]),(0,A.jsxs)(s.Fragment,{children:[b&&(0,A.jsx)(x.A,{deleteOpen:b,idp:m,idpType:t,closeDeleteModalAndRefresh:async e=>{h(!1),e&&F()}}),(0,A.jsx)(j.A,{label:`${t.toUpperCase()} Configurations`}),(0,A.jsx)(i.Mxu,{children:(0,A.jsxs)(i.xA9,{container:!0,children:[(0,A.jsxs)(i.xA9,{item:!0,xs:12,sx:{...u._0.actionsTray,justifyContent:"flex-end",gap:8},children:[(0,A.jsx)(c.R,{scopes:[d.OV.ADMIN_CONFIG_UPDATE],resource:d.Ms,errorProps:{disabled:!0},children:(0,A.jsx)(f.A,{tooltip:"Refresh",children:(0,A.jsx)(i.$nd,{id:"refresh-keys",variant:"regular",icon:(0,A.jsx)(i.fNY,{}),onClick:()=>_(!0)})})}),(0,A.jsx)(c.R,{scopes:[d.OV.ADMIN_CONFIG_UPDATE],resource:d.Ms,errorProps:{disabled:!0},children:(0,A.jsx)(f.A,{tooltip:`Create ${t} configuration`,children:(0,A.jsx)(i.$nd,{id:"create-idp",label:"Create Configuration",variant:"callAction",icon:(0,A.jsx)(i.REV,{}),onClick:()=>C(`/identity/idp/${t}/configurations/add-idp`)})})})]}),(0,A.jsx)(i.xA9,{item:!0,xs:12,children:(0,A.jsx)(c.R,{scopes:[d.OV.ADMIN_CONFIG_UPDATE],resource:d.Ms,errorProps:{disabled:!0},children:(0,A.jsx)(i.bQt,{itemActions:T,columns:[{label:"Name",elementKey:"name"},{label:"Type",elementKey:"type"},{label:"Enabled",elementKey:"enabled"}],isLoading:D,records:O,entityName:"Keys",idField:"name"})})})]})})]})},b=()=>(0,A.jsx)(C,{idpType:"openid"})}}]);
//# sourceMappingURL=7485.c177f911.chunk.js.map