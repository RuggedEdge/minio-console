"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[8642],{8642:(e,s,r)=>{r.r(s),r.d(s,{default:()=>K});var t=r(65043),n=r(89923),l=r(73216),a=r(20649),i=r(77938),c=r(99161),o=r(21383),d=r(64159),x=r(64681),p=r(6681),u=r(61595),h=r(70579);const K=()=>{const e=(0,o.jL)(),s=(0,l.Zp)(),[r,K]=(0,t.useState)(""),[S,f]=(0,t.useState)(!1),[j,_]=(0,t.useState)([]),m=(0,i._)(c.Ms,[c.OV.KMS_CREATE_KEY]),y=(0,i._)(c.Ms,[c.OV.KMS_LIST_KEYS]);(0,t.useEffect)((()=>{E()}),[]),(0,t.useEffect)((()=>{f(!0)}),[r]),(0,t.useEffect)((()=>{if(S)if(y){let s=""===r.trim()?"*":r.trim();a.A.invoke("GET",`/api/v1/kms/keys?pattern=${s}`).then((e=>{f(!1),_(e.results)})).catch((s=>{f(!1),e((0,d.C9)(s))}))}else f(!1)}),[S,f,_,e,y,r]);const E=()=>{f(!0)};return(0,t.useEffect)((()=>{e((0,d.ph)("list_keys"))}),[e]),(0,h.jsxs)(t.Fragment,{children:[(0,h.jsx)(u.A,{label:"Key Management Service Keys"}),(0,h.jsx)(n.Mxu,{children:(0,h.jsxs)(n.xA9,{container:!0,children:[(0,h.jsxs)(n.xA9,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:"8px"}},children:[(0,h.jsx)(i.R,{scopes:[c.OV.KMS_LIST_KEYS],resource:c.Ms,errorProps:{disabled:!0},children:(0,h.jsx)(x.A,{onChange:K,placeholder:"Search Keys with pattern",value:r})}),(0,h.jsx)(i.R,{scopes:[c.OV.KMS_LIST_KEYS],resource:c.Ms,errorProps:{disabled:!0},children:(0,h.jsx)(p.A,{tooltip:"Refresh",children:(0,h.jsx)(n.$nd,{id:"refresh-keys",variant:"regular",icon:(0,h.jsx)(n.fNY,{}),onClick:()=>f(!0)})})}),m?(0,h.jsx)(i.R,{scopes:[c.OV.KMS_CREATE_KEY],resource:c.Ms,errorProps:{disabled:!0},children:(0,h.jsx)(p.A,{tooltip:"Create Key",children:(0,h.jsx)(n.$nd,{id:"create-key",label:"Create Key",variant:"callAction",icon:(0,h.jsx)(n.REV,{}),onClick:()=>s(c.zZ.KMS_KEYS_ADD)})})}):null]}),(0,h.jsx)(n.xA9,{item:!0,xs:12,sx:{marginTop:"5px"},children:(0,h.jsx)(i.R,{scopes:[c.OV.KMS_LIST_KEYS],resource:c.Ms,errorProps:{disabled:!0},children:(0,h.jsx)(n.bQt,{columns:[{label:"Name",elementKey:"name"},{label:"Created By",elementKey:"createdBy"},{label:"Created At",elementKey:"createdAt"}],isLoading:S,records:j,entityName:"Keys",idField:"name"})})})]})})]})}}}]);
//# sourceMappingURL=8642.34796fc7.chunk.js.map